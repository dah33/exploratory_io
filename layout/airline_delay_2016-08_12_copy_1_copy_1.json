{
    "name": "airline_delay_2016-08_12_copy_1_copy_1",
    "displayName": "Pivot",
    "dependencies": [
        "airline_delay_2016-08"
    ],
    "transformName": "",
    "options": {
        "marker": "pivot",
        "x": "",
        "y": "",
        "size": "",
        "color": "",
        "text": "",
        "shape": "",
        "facetcolumn": "",
        "facetrow": "",
        "barstyle": "stack",
        "barsort": "off",
        "label": "",
        "colh": "",
        "rowh": "",
        "meas": "",
        "scatterText": "",
        "includeOutlier": "off",
        "treatNAAsZero": "on",
        "mapmode": "USA-states",
        "columns": [
            {
                "name": "FL_DATE",
                "type": "Date",
                "escapedName": "FL_DATE",
                "_row": "FL_DATE",
                "isNumeric": false,
                "isDate": true
            },
            {
                "name": "CARRIER",
                "type": "character",
                "escapedName": "CARRIER",
                "_row": "CARRIER",
                "isNumeric": false,
                "isDate": false
            },
            {
                "name": "FL_NUM",
                "type": "integer",
                "escapedName": "FL_NUM",
                "_row": "FL_NUM",
                "isNumeric": true,
                "isDate": false
            },
            {
                "name": "ORIGIN",
                "type": "character",
                "escapedName": "ORIGIN",
                "_row": "ORIGIN",
                "isNumeric": false,
                "isDate": false
            },
            {
                "name": "city",
                "type": "character",
                "escapedName": "city",
                "_row": "city",
                "isNumeric": false,
                "isDate": false
            },
            {
                "name": "state",
                "type": "character",
                "escapedName": "state",
                "_row": "state",
                "isNumeric": false,
                "isDate": false
            },
            {
                "name": "DEST",
                "type": "character",
                "escapedName": "DEST",
                "_row": "DEST",
                "isNumeric": false,
                "isDate": false
            },
            {
                "name": "DEST_CITY_NAME",
                "type": "character",
                "escapedName": "DEST_CITY_NAME",
                "_row": "DEST_CITY_NAME",
                "isNumeric": false,
                "isDate": false
            },
            {
                "name": "DEP_TIME",
                "type": "character",
                "escapedName": "DEP_TIME",
                "_row": "DEP_TIME",
                "isNumeric": false,
                "isDate": false
            },
            {
                "name": "DEP_DELAY",
                "type": "numeric",
                "escapedName": "DEP_DELAY",
                "_row": "DEP_DELAY",
                "isNumeric": true,
                "isDate": false
            },
            {
                "name": "ARR_TIME",
                "type": "character",
                "escapedName": "ARR_TIME",
                "_row": "ARR_TIME",
                "isNumeric": false,
                "isDate": false
            },
            {
                "name": "ARR_DELAY",
                "type": "numeric",
                "escapedName": "ARR_DELAY",
                "_row": "ARR_DELAY",
                "isNumeric": true,
                "isDate": false
            },
            {
                "name": "CANCELLED",
                "type": "numeric",
                "escapedName": "CANCELLED",
                "_row": "CANCELLED",
                "isNumeric": true,
                "isDate": false
            },
            {
                "name": "CANCELLATION_CODE",
                "type": "character",
                "escapedName": "CANCELLATION_CODE",
                "_row": "CANCELLATION_CODE",
                "isNumeric": false,
                "isDate": false
            },
            {
                "name": "AIR_TIME",
                "type": "numeric",
                "escapedName": "AIR_TIME",
                "_row": "AIR_TIME",
                "isNumeric": true,
                "isDate": false
            },
            {
                "name": "DISTANCE",
                "type": "numeric",
                "escapedName": "DISTANCE",
                "_row": "DISTANCE",
                "isNumeric": true,
                "isDate": false
            },
            {
                "name": "day_of_week",
                "type": "ordered,factor",
                "escapedName": "day_of_week",
                "_row": "day_of_week",
                "isNumeric": false,
                "isDate": false
            },
            {
                "name": "Name",
                "type": "character",
                "escapedName": "Name",
                "_row": "Name",
                "isNumeric": false,
                "isDate": false
            },
            {
                "name": "Latitude",
                "type": "numeric",
                "escapedName": "Latitude",
                "_row": "Latitude",
                "isNumeric": true,
                "isDate": false
            },
            {
                "name": "Longitude",
                "type": "numeric",
                "escapedName": "Longitude",
                "_row": "Longitude",
                "isNumeric": true,
                "isDate": false
            }
        ],
        "data": [
            [
                [
                    "AK",
                    "13.5135135135135,2",
                    "10.8108108108108,2",
                    "13.5135135135135,2",
                    "29.7297297297297,5",
                    "5.40540540540541,1",
                    "5.40540540540541,1",
                    "21.6216216216216,4"
                ],
                [
                    "AL",
                    null,
                    "40,5",
                    "20,1",
                    null,
                    null,
                    "20,1",
                    "20,1"
                ],
                [
                    "AR",
                    "25,3",
                    "25,3",
                    null,
                    "25,3",
                    null,
                    null,
                    "25,3"
                ],
                [
                    "AZ",
                    "14.2857142857143,2",
                    "28.5714285714286,5",
                    "14.2857142857143,2",
                    "14.2857142857143,2",
                    "14.2857142857143,2",
                    "7.14285714285714,1",
                    "7.14285714285714,1"
                ],
                [
                    "CA",
                    "18.6813186813187,5",
                    "15.9340659340659,4",
                    "15.9340659340659,4",
                    "12.0879120879121,2",
                    "10.989010989011,2",
                    "17.5824175824176,5",
                    "8.79120879120879,1"
                ],
                [
                    "CO",
                    "8.82352941176471,1",
                    "17.6470588235294,2",
                    "5.88235294117647,1",
                    "5.88235294117647,1",
                    "11.7647058823529,1",
                    "38.2352941176471,5",
                    "11.7647058823529,1"
                ],
                [
                    "CT",
                    null,
                    null,
                    "50,3",
                    null,
                    "50,3",
                    null,
                    null
                ],
                [
                    "DC",
                    "3.84615384615385,1",
                    "30.7692307692308,4",
                    "15.3846153846154,2",
                    "38.4615384615385,5",
                    "3.84615384615385,1",
                    "3.84615384615385,1",
                    "3.84615384615385,1"
                ],
                [
                    "FL",
                    "10.4761904761905,1",
                    "14.2857142857143,2",
                    "37.1428571428571,5",
                    "5.71428571428571,1",
                    "10.4761904761905,1",
                    "6.66666666666667,1",
                    "15.2380952380952,2"
                ],
                [
                    "GA",
                    "19.5652173913043,3",
                    "30.4347826086957,5",
                    "17.3913043478261,3",
                    "8.69565217391304,1",
                    "8.69565217391304,1",
                    "4.34782608695652,1",
                    "10.8695652173913,2"
                ],
                [
                    "HI",
                    "10.752688172043,1",
                    "18.2795698924731,4",
                    "15.0537634408602,3",
                    "13.9784946236559,3",
                    "21.505376344086,5",
                    "8.60215053763441,1",
                    "11.8279569892473,2"
                ],
                [
                    "IA",
                    "25,1",
                    null,
                    null,
                    null,
                    null,
                    "75,5",
                    null
                ],
                [
                    "ID",
                    "20,1",
                    "20,1",
                    "40,5",
                    "20,1",
                    null,
                    null,
                    null
                ],
                [
                    "IL",
                    "12,3",
                    "22,5",
                    "14,3",
                    "4,1",
                    "12,3",
                    "16,4",
                    "20,5"
                ],
                [
                    "IN",
                    "22.2222222222222,3",
                    "11.1111111111111,1",
                    "33.3333333333333,5",
                    null,
                    "22.2222222222222,3",
                    "11.1111111111111,1",
                    null
                ],
                [
                    "KS",
                    "20,1",
                    null,
                    null,
                    "40,5",
                    null,
                    "40,5",
                    null
                ],
                [
                    "KY",
                    null,
                    "50,3",
                    null,
                    "50,3",
                    null,
                    null,
                    null
                ],
                [
                    "LA",
                    "22.2222222222222,3",
                    "22.2222222222222,3",
                    null,
                    "11.1111111111111,1",
                    null,
                    "33.3333333333333,5",
                    "11.1111111111111,1"
                ],
                [
                    "MA",
                    "18.1818181818182,4",
                    "4.54545454545455,1",
                    "22.7272727272727,5",
                    "13.6363636363636,3",
                    "13.6363636363636,3",
                    "9.09090909090909,2",
                    "18.1818181818182,4"
                ],
                [
                    "MD",
                    "15.7894736842105,3",
                    "5.26315789473684,1",
                    "31.5789473684211,5",
                    "31.5789473684211,5",
                    "10.5263157894737,1",
                    null,
                    "5.26315789473684,1"
                ],
                [
                    "ME",
                    "25,3",
                    null,
                    null,
                    "25,3",
                    "25,3",
                    "25,3",
                    null
                ],
                [
                    "MI",
                    "17.1428571428571,4",
                    "22.8571428571429,5",
                    "5.71428571428571,1",
                    "22.8571428571429,5",
                    "5.71428571428571,1",
                    "17.1428571428571,4",
                    "8.57142857142857,1"
                ],
                [
                    "MN",
                    null,
                    "19.047619047619,2",
                    "14.2857142857143,1",
                    "33.3333333333333,5",
                    "14.2857142857143,1",
                    "19.047619047619,2",
                    null
                ],
                [
                    "MO",
                    "23.0769230769231,4",
                    null,
                    null,
                    "30.7692307692308,5",
                    "15.3846153846154,2",
                    "23.0769230769231,4",
                    "7.69230769230769,1"
                ],
                [
                    "MS",
                    "50,3",
                    null,
                    null,
                    null,
                    "50,3",
                    null,
                    null
                ],
                [
                    "MT",
                    "20,3",
                    null,
                    "20,3",
                    "20,3",
                    "20,3",
                    "20,3",
                    null
                ],
                [
                    "NC",
                    "30,5",
                    "20,3",
                    "30,5",
                    null,
                    null,
                    "10,1",
                    "10,1"
                ],
                [
                    "ND",
                    "33.3333333333333,5",
                    null,
                    null,
                    null,
                    "33.3333333333333,5",
                    "16.6666666666667,1",
                    "16.6666666666667,1"
                ],
                [
                    "NE",
                    null,
                    "20,1",
                    "40,5",
                    null,
                    "20,1",
                    null,
                    "20,1"
                ],
                [
                    "NJ",
                    "35.4838709677419,5",
                    null,
                    "12.9032258064516,2",
                    "3.2258064516129,1",
                    "12.9032258064516,2",
                    "12.9032258064516,2",
                    "22.5806451612903,3"
                ],
                [
                    "NM",
                    null,
                    null,
                    null,
                    null,
                    "50,3",
                    null,
                    "50,3"
                ],
                [
                    "NV",
                    "12.5,2",
                    "17.5,4",
                    "15,3",
                    "10,2",
                    "15,3",
                    "25,5",
                    "5,1"
                ],
                [
                    "NY",
                    "16.4556962025316,2",
                    "12.6582278481013,1",
                    "15.1898734177215,2",
                    "8.86075949367089,1",
                    "27.8481012658228,5",
                    "8.86075949367089,1",
                    "10.126582278481,1"
                ],
                [
                    "OH",
                    "5,1",
                    "30,5",
                    "25,4",
                    "10,1",
                    "5,1",
                    "15,2",
                    "10,1"
                ],
                [
                    "OK",
                    "30,4",
                    "10,1",
                    null,
                    "20,2",
                    null,
                    null,
                    "40,5"
                ],
                [
                    "OR",
                    "11.1111111111111,2",
                    "5.55555555555556,1",
                    "27.7777777777778,5",
                    "27.7777777777778,5",
                    "11.1111111111111,2",
                    "11.1111111111111,2",
                    "5.55555555555556,1"
                ],
                [
                    "PA",
                    "9.09090909090909,1",
                    "18.1818181818182,3",
                    "27.2727272727273,5",
                    "27.2727272727273,5",
                    null,
                    "9.09090909090909,1",
                    "9.09090909090909,1"
                ],
                [
                    "PR",
                    null,
                    "25,4",
                    "33.3333333333333,5",
                    "25,4",
                    null,
                    "8.33333333333333,1",
                    "8.33333333333333,1"
                ],
                [
                    "RI",
                    "100,3",
                    null,
                    null,
                    null,
                    null,
                    null,
                    null
                ],
                [
                    "SC",
                    null,
                    null,
                    "40,5",
                    null,
                    "40,5",
                    "20,1",
                    null
                ],
                [
                    "SD",
                    null,
                    null,
                    null,
                    null,
                    null,
                    "100,3",
                    null
                ],
                [
                    "TN",
                    "5,1",
                    "15,2",
                    "10,1",
                    "15,2",
                    "10,1",
                    "35,5",
                    "10,1"
                ],
                [
                    "TX",
                    "9.61538461538462,1",
                    "10.5769230769231,1",
                    "6.73076923076923,1",
                    "5.76923076923077,1",
                    "7.69230769230769,1",
                    "48.0769230769231,5",
                    "11.5384615384615,1"
                ],
                [
                    "UT",
                    "12.5,1",
                    "25,5",
                    null,
                    "12.5,1",
                    "25,5",
                    "12.5,1",
                    "12.5,1"
                ],
                [
                    "VA",
                    null,
                    "18.1818181818182,3",
                    "9.09090909090909,1",
                    "18.1818181818182,3",
                    "18.1818181818182,3",
                    "9.09090909090909,1",
                    "27.2727272727273,5"
                ],
                [
                    "VI",
                    "50,3",
                    "50,3",
                    null,
                    null,
                    null,
                    null,
                    null
                ],
                [
                    "VT",
                    "100,3",
                    null,
                    null,
                    null,
                    null,
                    null,
                    null
                ],
                [
                    "WA",
                    "2.94117647058824,1",
                    "29.4117647058824,5",
                    "8.82352941176471,2",
                    "11.7647058823529,2",
                    "5.88235294117647,1",
                    "23.5294117647059,4",
                    "17.6470588235294,3"
                ],
                [
                    "WI",
                    null,
                    "50,5",
                    null,
                    "10,1",
                    "40,4",
                    null,
                    null
                ],
                [
                    "WV",
                    null,
                    null,
                    "100,3",
                    null,
                    null,
                    null,
                    null
                ],
                [
                    "WY",
                    null,
                    "25,3",
                    null,
                    "25,3",
                    "25,3",
                    "25,3",
                    null
                ]
            ],
            [
                "r0",
                "Sun",
                "Mon",
                "Tues",
                "Wed",
                "Thurs",
                "Fri",
                "Sat"
            ],
            [
                51
            ],
            [
                8
            ]
        ],
        "query": "try(jsonlite::toJSON(`airline_delay_2016-08_d569a0713e8b_copy_1_copy_1` %>% \ndplyr::ungroup() %>% \ndplyr::mutate(c0=day_of_week,`r0`=`state`,`m0`=1,`m1`=1) %>% \ndplyr::group_by(c0,r0) %>% \ndplyr::summarize(`m0`=n()) %>% \ndplyr::ungroup() %>% \ndplyr::group_by(r0) %>% \ndplyr::mutate(`m0`=(`m0` / sum(`m0`)) * 100) %>% \ndplyr::mutate(m1=`_tam_cut`(m0, breaks=5, labels=F)) %>% \ndplyr::ungroup() %>% \ndplyr::arrange(c0) %>% \ntidyr::unite(.pivot.measure.cell, m0,m1, sep=\",\") %>% \ntidyr::spread(c0, .pivot.measure.cell) %>% \ndplyr::ungroup() %>% \ndplyr::arrange(r0) %>% \n(function(df) { \n  .nrow <- nrow(df)\n  .ncol <- ncol(df)\n  .maxcell <- 3000\n  df <- df %>% select( 1: min(.ncol ,301))\n  if (.nrow * ncol(df) > .maxcell) {\n    .maxrows <- as.integer(.maxcell / ncol(df))\n    df <- slice(df, 1 : .maxrows)\n  }\n  return (list(df, colnames(df), .nrow, .ncol))\n}), na=\"null\" , dataframe=\"values\"))",
        "sampleDataSize": 0,
        "height": 611,
        "width": 769,
        "rowh0": {
            "name": "state",
            "validName": "state",
            "type": "character",
            "isNumeric": false,
            "isDate": false,
            "func": "none",
            "label": "c1",
            "validLabel": "c1"
        },
        "meas0": {
            "name": ".dummy.column.name.for.count.column",
            "validName": ".dummy.column.name.for.count.column",
            "isNumeric": false,
            "isDate": false,
            "type": "numrows",
            "func": "count",
            "label": "c3",
            "validLabel": "c3"
        },
        "colh0": {
            "name": "day_of_week",
            "validName": "day_of_week",
            "type": "ordered,factor",
            "isNumeric": false,
            "isDate": false,
            "func": "none",
            "label": "c2",
            "validLabel": "c2"
        },
        "pivotColor": "row",
        "quantColorPalette": "YlOrRd",
        "meas0WindowFuncGroup": "total",
        "meas0WindowFunc": "ptotal",
        "errHighLowEnabled": "off",
        "meas0WindowFuncDirection": "row"
    },
    "timestamp": "2017-03-17T05:31:59.916Z",
    "updatedBy": "",
    "thumbnail": null,
    "publicTitle": "",
    "publicDescription": "",
    "publicDataSourceURL": "",
    "withSteps": true,
    "privateShare": false,
    "sharedURL": "",
    "publishSizeOption": null,
    "filename": "airline_delay_2016-08_12_copy_1_copy_1.json"
}